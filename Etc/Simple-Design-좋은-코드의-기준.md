# 좋은 코드는 무엇인가?
## 가독성? `Simple Design`
- 누구에게 읽기 쉬워야하나? 모호함
- 가독성이란 표현은 해롭다. ex. 클린 코드
	- 이해하지 못하겠으면, 나쁜 코드 -> 내가 코드를 이해하지 못하는 것을 다른 사람의 책임으로 돌린다.
- 가독성 대신 `Kent Beck`의 `Simple Design`
	- 테스트를 통과해야한다.
	- 중복 로직이 없어야한다.
	- 프로그래머의 중요한 전략을 드러내야한다.
	- class, method 가 적어야한다.
- Martin Fowler와 비슷한 의견
	- !!! 테스트를 통과해야한다.
	- !! 중복이 적어야한다.
	- !! 의도를 드러내야한다.
	- ! 요소가 적어야한다.
- 근데, 원칙 4개도 좀 많다고 생각했음.
	- 테스트 통과는, 자동화된 테스트를 만드는 팀에게 당연함.
	- 의도를 드러내라, 중요한 원칙이지만 주관성이 강하고 초중급자들은 실천하기 힘듬
	- **중복이 없으면서 구성요소가 최소한인 코드**
- 따라서 좋은 코드를 작성하는 방법은
	- **코드에서 중복을 제거한다.**
	- **그러면서 구성요소를 줄일 방법을 찾는다.**

# 중복제거방법
- (중복제거시 주의) extract method 의 위험성
	- 함수가 길 때, 빼내기 위해 사용하기도 한다.
	- 잘못된 Extract Method 는 코드 품질을 더 떨어뜨린다.
		- 차라리 하나의 메서드로 붙어있는 것이 나음.
	- Goto considered harmful
		- goto: 라벨로 이동
		- 함수는 Goto 의 대안이 아니다.
		- 정적인 코드와 동적으로 실행되는 프로세스 사이의 개념적 불일치가 있다.
	- 함수 안에 들어가보지 않으면 안된다.
		- side effect
		- 멱등성 등...
- (참고) Side Effect를 제거하자
	- 순수함수
	- Mutator(변형)와 Accessor를 구분하자
- 숨겨진 중복
	- 클래스의 평생 상속 구조
		- ex. 파일 관련 클래스 - 파일 처리 관련 클래스 (평행 상속)
		- 달라진 코드만 따로 호출해도 좋다.
	- IF 조건의 중복
		- 조건에 따라 무한한 조건문...
		- IF 조건의 중복은 확산이 되는 경향이 있다.
		- 다형성으로 해결한다. (클래스가 많이 늘어나서 주의해야함)
	- 동일한 필드들을 여러곳에서 나열하는 경우
		- Spring 에서 흔하게 나타남.
		- DTO, entity... 중복성 검사 등.
		- 이런 중복도 다 제거해야할까?
			- 찾으면 방법이 있음.
			- HTMX, Hotwire -> 서버에 다 맡김.
## 구성요소를 줄이는 방법
- 생각할 수 있는 모든 요소를 줄어야함.
- 심리적인 문제를 극복해야함.
- 방해하는 관점
	- 과도한 일관성
		- 디렉토리, 패키지 레벨 일관되게 맡추기...
	- SpringData REST vs DTO, Service, Controller
		- 꼭 지켜야하는 일관성인지 확인하자.
	- 정말 필요한 일관성이 맞는가?
	- 함수가 작아야 이해하기 쉽다는 관점
		- 한번에 이해해야하는 단위가 중요하다.
	- 코드 품질은 주관적인 느낌이다?
		- 구성요소의 수도 측정 가능한다.
- *Make the easy things easy, and the hard things possible*
- 중복을 제거하다보면 중요한 일관성은 달성된다.

## simple design 을 방해하는 요소
- 코드품질을 높이는 데는 시간이 필요하다.
	- 주객전도임.
	- 코드 품질이 중요한 것은 더 빨리 완료하기 위해서이다.
- 리팩토링을 할 시간이 없는 게 아니다.
	- 리팩토링을 안했기 때문에 시간이 없는 것이다.
- 처음부터 제대로 해야한다.
	- 처음부터 완벽하게 설계할순없다.
	- 기술성과 위험성을 모두 고려하기 힘들다.
- 자동화는 좋은 것이다.
	- 복잡한 것을 자동화하면, 현재의 복잡함이 고착화되어 바꾸기 어려워지고
	- 점점 복잡함이 늘어남.
	- 먼저 단순화 -> 자동화하라
	- 1년 한두번 있는 번거로움을 피하기 위해 자동화된 툴을 사용하지 말자.

## 얼마나 엄격하게 지킬것인가?
- 드라이퍼스 모델
	- 초보자는 규칙으로 일하고, 전문가는 직관으로 일한다.
- 내가 아직 초보자라면 좀더 극단적으로 Simple Design 을 추구해보자.