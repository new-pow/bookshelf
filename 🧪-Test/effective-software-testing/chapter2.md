# 2. 명세 기반 테스트

- 요구사항 자체에서 테스트를 도출하는 것

## 2.1 요구사항이 모든 걸 말한다.

- 예제 1. `substringsBetween`
    - str 에 대한 테스트
        - null 일경우 null 을 반환해야한다.
        - 문자열이 1글자일 경우
            - open 만 존재하는 경우
            - close 만 존재하는 경우
            - 둘 다 존재하지 않는 경우
        - 문자열이 2글자일 경우
            - open 만 존재하는 경우
            - close 만 존재하는 경우
            - 둘 다 존재하지 않는 경우
        - 문자열이 매우 길 경우
    - open
        - null 일 경우 null 을 반환해야한다.
        .
        .
        .

- 방법
    - 1단계 : 요구사항과 입출력에 대해 이해하기
    - 2단계 : 여러 입력값에 대해  프로그램이 수행하는 바를 탐색하기
    - 3단계 : 테스트 가능한 입출력과 구획을 탐색하기
        - "두 입력은 동등하다."
            - 프로그램은 일부 입력 집합에 대해 동일한 방식으로 동작한다. 자원은 한정적이므로 하나의 케이스가 그런 부류의 입력 전체를 대표하는 것이라 믿는다.
    - 4단계 : 경계 분석하기
        - 경계, 접점, 거점
        - 내점, 외점
        - 보통 경계를 발견할 때마다 두개의 테스트면 충분하다
    - 5단계 : 테스트 케이스 고안하기
        - 모든 조합의 테스트 케이스를 기획하면 효율성이 현저히 떨어진다.
        - 예외적인 경우 한번만 수행하고 조합하지 않을 수도 있고, 완전히 조합할 필요가 없는 구획도 있다.
    - 6단계 : 테스트 케이스 자동화하기
        - 고안한 테스트의 입, 출력값을 작성해 자동화하기
    - 7단계 : 창의성과 경험을 발휘해서 테스트 스위트를 강화하기
        - 명세 테스트 이후의 다음 단계는 구현을 실행하고 테스트 스위트를 보강하는 일. -> 3장에서
- 참고
    - 범주-구획법
    - 도메인 테스트 워크북
- 도메인 지식은 좋은 테스트 케이스를 만들기 위해 중요하다.

## 2.4 현업에서의 명세 테스트

- 프로세스는 연속적인 아니라 반복적이어야 한다.
    - 전체 프로세스는 요구사항 분석 - 테스트 - 구현 이 연속적이 아니라 계속 전체를 반복하게된다.
- 명세 테스트는 어느정도로 수행해야 하는가?
    - 프로그램의 비용이 높은 부분이라면 더 많은 코너 케이스를 탐색하고, 품질을 보장하기 위해 다양한 기술을 시도하는 것이 현명할 수 있다.
- 구획인가 경계인가는 중요하지 않다.
    - 중요한 것은 테스트 케이스가 도출되고 버그가 프로그램에 스며들지 않는다는 점
- 접점과 거점으로도 충분하지 만 내점과 외점도 얼마든지 추가하자
    - 추가한 점들로 인해 프로그램을 더 잘 이해하고 실제 입력을 더 잘 나타낼 수 있다.
    - 테스트 스위트를 가볍게 유지하려는 노력은 항상 좋은 생각이지만 몇몇 점들을 추가하는 것은 괜찮다.
- 이해를 높이기 위해 입력을 변경해서 사용하자
    - 어떤 테스트 케이스가 실패하면 다른 케이스와의 비교를 하기 쉬워진다.
    - 그러나 다양한 입력은 필수
- 조합의 수가 폭발적으로 증가한다면 실용적이어야 한다
    - 가능한 조합의 수를 줄이도록 한다.
    - 메서드 수준에서 너무 많은 조합이 발생한다면, 메서드를 두 개로 나누는 것을 고려하자.
- 무엇을 입력할지 모르겠다면 간단한 입력을 넣어보자
    - 현실적이면서도 디버깅에 용이한 간단한 값을 넣어본다.
- 관심 없는 입력에 대해 합리적인 값을 선택하자
- 널과 예외 케이스는 의미가 있을 때만 사용한다
    - 테스트를 작성하기 전에 소프트웨어 시스템(혹은 아키텍처)의 전반적인 그림을 이해해야 한다.
    - 아키텍처는 메서드를 호출하기 전에 메서드의 사전 조건을 확인할 수 있다.
    - 요소에 도달하기 전에 검사된 것이 확실하다면 이러한 ㅌ ㅔ스트를 건너뛸 수 있다.
- 테스트가 동일한 스켈레톤을 갖는 경우 매개변수화 테스트를 사용하자
    - 매개변수화 테스트가 뭐였지? 다시 확인해볼 것
- 요구사항은 잘게 쪼갤 수 있다
- 클래스와 상태에 어떻게 동작하는가?
    - 입력 변수 뿐만 아니라 상태 설정도 고려해야할 필요가 있다.
