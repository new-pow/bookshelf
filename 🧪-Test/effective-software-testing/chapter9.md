## 9. 대규모 테스트 작성

### 9.1 대규모 테스트 사용 시기

다음과 같은 상황에서 대규모 테스트를 고려할 수 있다:

- 각 클래스에 대한 단위 테스트는 존재하지만, 여러 구성 요소가 유기적으로 동작하는 테스트가 없을 때,
- 테스트하려는 클래스가 플러그 앤 플레이 구조의 일부로, 다양한 컴포넌트와 연동되어야 할 때

이처럼 **여러 요소가 함께 작동하는 흐름**을 검증하려면, 대규모 테스트가 필요하다.

---

### 9.2 데이터베이스와 SQL 테스트

데이터베이스와 통합하여 테스트할 때는 다음과 같은 인프라를 준비하자:

1. **전용 DB 연결 클래스 구성**  
    테스트용 데이터베이스와 연결할 클래스를 만들어, 트랜잭션 설정, 초기화, 정리 등을 처리하게 하자.
    
2. **테스트 데이터 생성기 작성**  
    반복적인 데이터 입력을 줄이기 위해 생성기를 사용하되, 테스트 목적에 맞는 **최소한의 데이터**만 생성하도록 하자.
    
3. **단언(Assertion) 도우미 만들기**  
    복잡한 assert 문은 캡슐화해서 재사용 가능한 도우미 함수로 만들어, 테스트 코드를 읽기 쉽게 하자.

이러한 인프라가 있으면, **복잡한 DB 통합 테스트도 명료하게 작성**할 수 있다.

---

### 9.3 시스템 테스트

**시스템 테스트는 애플리케이션 전체가 잘 동작하는지를 검증**하는 테스트다. 예를 들어, 회원가입 흐름 전체를 테스트할 때 다음처럼 수행할 수 있다:

- 셀레늄(Selenium)과 같은 UI 테스트 프레임워크 사용
- 브라우저를 실제로 열고, 입력 폼 작성 → 버튼 클릭 → 성공 메시지 확인 등의 과정을 자동화

이는 **사용자 관점에서의 최종 경험을 검증**하는 데 효과적이다.

---

### 9.4 마무리: 대규모 테스트의 적정 수준은?

- 모든 로직을 단위 테스트하는 것이 기본
- **중요한 핵심 흐름은 대규모 테스트로 보완**
- 하지만 대규모 테스트는 **비용이 많이 들고 느릴 수 있으므로**, **비용-이득 분석**을 통해 신중하게 적용 범위를 결정해야 한다
    
---

### 핵심은 ‘테스트 인프라’

통합/시스템 테스트의 품질과 유지 보수성을 높이려면 다음이 중요하다:

- 테스트 환경 구축을 자동화하거나 간소화
- 반복되는 코드 최소화
- 누구나 쉽게 테스트를 작성할 수 있도록 **유틸성 도구**와 **프레임워크**를 마련

결국, **잘 설계된 테스트 인프라**가 대규모 테스트의 성공을 결정짓는다.